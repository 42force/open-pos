<td-layout-nav logo="assets:logo">

    <div td-toolbar-button layout="row" class="bgc-whitesmoke md-shadow-bottom-z-1 push-sm" layout-wrap="">
      <button md-button="" color="accent" (click)="goBack()">
        <md-icon color="accent">arrow_back</md-icon>
      </button>

      <button md-button="" color="primary" class="bold" (click)="toggleFilter(1)" flex>Tags</button>
      <button md-button="" color="primary" class="bold" (click)="toggleFilter(2)" flex>Brands</button>
      <button md-button="" color="primary" class="bold" (click)="toggleFilter(3)" flex>Distributors</button>
      <button md-button="" color="primary" class="bold" (click)="toggleFilter(4)" flex>Salts</button>

      <div class="filter-card-parent" [hidden]="filterType!=1">
        <md-card flex="70">
          <md-card-title class="bold">Tags</md-card-title>
          <md-divider></md-divider>
          <md-card-content class="md-content filter-card-height">
            <div layout="row" layout-wrap="">
              <template let-tag ngFor [ngForOf]="tags">
                <md-checkbox class="" flex="20" layout-padding=""
                             ([checked])="checkTag(tag)" (change)="toggleTag(tag)">
                  {{tag.name}}
                </md-checkbox>
              </template>
            </div>
          </md-card-content>
          <md-divider></md-divider>
          <md-card-actions layout="row" layout-align="end center">
            <button md-raised-button="" color="accent" (click)="toggleFilter(0)">Close</button>
          </md-card-actions>
        </md-card>
      </div>
      <div class="filter-card-parent" [hidden]="filterType!=2">
        <md-card flex="70">
          <md-card-title class="bold">Brands</md-card-title>
          <md-divider></md-divider>
          <md-card-content class="md-content filter-card-height">
            <div layout="row" layout-wrap="">
              <template let-brand ngFor [ngForOf]="brands">
                <md-checkbox class="pad-xs" flex="20" ([checked])="checkBrand(brand.id)"
                             (change)="toggleBrand(brand.id)">
                  {{brand.name}}
                </md-checkbox>
              </template>
            </div>
          </md-card-content>
          <md-divider></md-divider>
          <md-card-actions layout="row" layout-align="end center">
            <button md-raised-button="" color="accent" (click)="toggleFilter(0)">Close</button>
          </md-card-actions>
        </md-card>
      </div>
      <div class="filter-card-parent" [hidden]="filterType!=3">
        <md-card flex="70">
          <md-card-title class="bold">Distributor</md-card-title>
          <md-divider></md-divider>
          <md-card-content class="md-content filter-card-height">
            <div layout="row" layout-wrap="">
              <template let-distributor ngFor [ngForOf]="distributors">
                <md-checkbox class="" flex="20" layout-padding ([checked])="checkDistributor(distributor.id)"
                             (change)="toggleDistributor(distributor.id)">
                  {{distributor.name}}
                </md-checkbox>
              </template>
            </div>
          </md-card-content>
          <md-divider></md-divider>
          <md-card-actions layout="row" layout-align="end center">
            <button md-raised-button="" color="accent" (click)="toggleFilter(0)">Close</button>
          </md-card-actions>
        </md-card>
      </div>
      <div class="filter-card-parent" [hidden]="filterType!=4">
        <md-card class="filter-card" flex="70">
          <md-card-title class="bold">Salts</md-card-title>
          <md-divider></md-divider>
          <md-card-content class="md-content filter-card-height">
            <div layout="row" layout-wrap="">
              <template let-salt ngFor [ngForOf]="salts">
                <md-checkbox class="pad-xs" ([checked])="checkSalt(salt.id)"
                             (change)="toggleSalt(salt.id)" flex="20">
                  {{salt.name}}
                </md-checkbox>
              </template>
            </div>
          </md-card-content>
          <md-divider></md-divider>
          <md-card-actions layout="row" layout-align="end center">
            <button md-raised-button="" color="accent" (click)="toggleFilter(0)">Close</button>
          </md-card-actions>
        </md-card>
      </div>
      <span flex></span>
      <div flex="40" class="">
        <td-search-box backIcon="arrow_back" placeholder="Search here" [showUnderline]="true" [debounce]="500"
                       [alwaysVisible]="true"
                       (search)="searchInputTerm = $event" (clear)="searchInputTerm = ''">
        </td-search-box>
      </div>
      <span flex></span>
      <span layout-align="center center" layout="row">
        <md-slide-toggle [color]="'accent'" layout="row">
          <span class="bold tc-accent">
            Combo's
          </span>
        </md-slide-toggle>
      </span>
      <span flex></span>
      <button md-button md-raised-button="" color="accent" class="bold" flex="20"
              layout-margin="" (click)="checkOut()">
        <span *ngIf="cart" class=" md-title bold">
        {{cart.total - cart.auto_discount ||0 | currency:'INR':true:'1.2-2'}}/-
        </span>

        <span class="md-body-2 bold">

        Checkout
        </span>

      </button>

    </div>


  <div layout="row" layout-wrap="" class="push-sm" flex>
    <div layout="row" layout-wrap="" flex="" class="" layout-align="start">
      <!--<div class="md-content md-shadow-bottom-z-1" flex="100" md-scroll-y="" layout-fill="" layout="row" layout-wrap=""-->
      <!--layout-align="center center">-->
      <template let-product ngFor let-last
                [ngForOf]="products |  productDistributor: selectedDistributors | productSearch: searchInputTerm
                   | productBrand : selectedBrands | productTag: selectedTags |
                    productSalt: selectedSalts | paginate : {itemsPerPage: 54, currentPage: p}">

        <div class="md-content bgc-white-4 push-right-sm push-bottom-sm md-shadow-bottom-z-1" flex="10"
             layout="row" layout-wrap="" layout-align="center start">
          <div flex="100" layout="row" class="">
            <span flex></span>
            <span (click)="showInfo(product)" class="info-click pad-top-xs pad-right-xs"><md-icon
              class="md-18 tc-accent">info_outline</md-icon>
              </span>
          </div>
          <div layout="column" class="pad-left-sm pad-right-sm pad-bottom-sm product-click text-center"
               (click)="addProduct(product, product.available_stocks[0])">
              <span class="tc-primary bold">
              {{product.name}}
              </span>
            <span class="md-body-1 tc-grey-600">{{product.brand_name}}</span>
          </div>
        </div>
      </template>

      <div flex="100" layout="row" layout-align="center center" class=" tc-grey-700">
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
      </div>
    </div>
    <div layout="column" class="" flex="20">
      <div class="md-content bgc-white-4" md-scroll-y="" flex="80">
        <md-list *ngIf="cart">
          <template let-item ngFor let-last [ngForOf]="cart.items">
            <md-list-item>
              <h4 md-line class="tc-grey-700">{{item.name}}</h4>
              <span flex></span>
              <span class="pad-left md-body-1 tc-grey-500">
                <md-input type="number" ([value])="item.quantity" [(ngModel)]="item.quantity"
                          (change)="updateProductQuantity(item.product_id, item.stock_id, item.quantity)"></md-input>
              </span>
              <span flex="30" class="pad-left md-body-1 tc-accent">{{item.discounted_total_price | currency:'INR':true:'1.2-2'}}/-</span>
              <span flex></span>
            </md-list-item>
            <md-list-item class="">
              <button md-icon-button="" class="bgc-blue-100"
                      (click)="updateProductQuantity(item.product_id, item.stock_id, item.quantity+1)">
                <md-icon class=" tc-grey-700">keyboard_arrow_up</md-icon>
              </button>
              <span flex></span>
              <button md-icon-button="" class="bgc-blue-100"
                      (click)="updateProductQuantity(item.product_id, item.stock_id, item.quantity-1)">
                <md-icon class=" tc-grey-700">keyboard_arrow_down</md-icon>
              </button>
              <span flex></span>
              <button md-icon-button="" class="bgc-blue-100" (click)="discountItem(item.product_id, item.stock_id)">
                <md-icon class=" tc-grey-700">money_off</md-icon>
              </button>
              <span flex></span>
              <button md-icon-button="" class="bgc-blue-100" (click)="removeProduct(item.product_id, item.stock_id)">
                <md-icon class=" tc-grey-700">remove_circle_outline</md-icon>
              </button>

            </md-list-item>
            <!--<md-divider *ngIf="!!last" class=""></md-divider>-->
          </template>
        </md-list>
      </div>
      <div class="bgc-white-4 pad tc-grey-700 md-body-1 bold" flex="25" layout-align="center center" layout="row"
           layout-wrap="" *ngIf="cart">
        <template let-entry ngFor [ngForOf]="cart.taxes | keys">
          <div flex="100" layout-wrap="" layout="row" *ngIf="entry.key!=='total'">
            <span>{{entry.key}}</span>
            <span flex></span>
            <span>{{entry.value | currency:'INR':true:'1.2-2'}}</span>
          </div>
        </template>

        <div flex="100" layout-wrap="" layout="row">
          <span>Auto Discount</span>
          <span flex></span>
          <span>{{cart.auto_discount | currency:'INR':true:'1.2-2'}}</span>
        </div>
        <div flex="100" layout-wrap="" layout="row" class="bold push-top-sm">
          <md-divider class="pad-xs" flex="100"></md-divider>
          <span>Sub Total</span>
          <span flex></span>
          <span>{{cart.sub_total | currency:'INR':true:'1.2-2'}}</span>
        </div>
        <div flex="100" layout-wrap="" layout="row" class="md-title bold push-top-sm">
          <span>Total</span>
          <span flex></span>
          <span>{{cart.total | currency:'INR':true:'1.2-2'}}</span>
        </div>
      </div>

    </div>
  </div>
</td-layout-nav>




